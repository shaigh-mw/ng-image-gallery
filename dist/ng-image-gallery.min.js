!function(){"use strict";var e={enter:13,esc:27,left:37,right:39};angular.module("thatisuday.ng-image-gallery",["ngAnimate"]).provider("ngImageGalleryOpts",function(){var e={thumbnails:!0,thumbSize:80,inline:!1,bubbles:!0,bubbleSize:20,imgBubbles:!1,bgClose:!1,piracy:!1,imgAnim:"fadeup",errorPlaceHolder:"Error when loading the image!"};return{setOpts:function(i){angular.extend(e,i)},$get:function(){return e}}}).filter("ngImageGalleryTrust",["$sce",function(e){return function(i,n){return e.trustAs(n||"html",i)}}]).directive("ngRightClick",["$parse",function(e){return{restrict:"A",scope:!1,link:function(e,i,n){i.bind("contextmenu",function(i){if(0==e.piracy)return i.preventDefault(),e.piracy})}}}]).directive("showImageAsync",[function(){return{restrict:"A",scope:!1,link:function(e,i,n){var a=new Image;a.src=n.showImageAsync,a.onload=function(){e.$apply(function(){"thumb"==n.asyncKind?(i.css({backgroundImage:'url("'+n.showImageAsync+'")'}),i.empty()):"bubble"==n.asyncKind&&i.css({backgroundImage:'url("'+n.showImageAsync+'")'})})},a.onerror=function(){i.empty()}}}}]).directive("bubbleAutoFit",["$window","$timeout",function(e,i){return{restrict:"A",scope:!1,link:{pre:function(n,a,t){var l=function(){var e=a[0].getBoundingClientRect().width;if(0!=e){var i=n.bubbleSize,t=8,l=i+t,g=e/l,o=Math.floor(g),s=e-o*l,r=s/o,c=t+r,m=c+i;n._bubblesInView=o,n._finalBubbleSpace=m,n._bubbleMargin="0 "+c/2+"px",n._safeApply(angular.noop)}};i(l),angular.element(e).bind("resize",function(){i(l)}),n.$watch("inline",function(){i(l)}),n.$watch("bubbleSize",function(){i(l)}),n.$watchCollection("images",function(){i(l)})}}}}]).directive("bubbleAutoScroll",["$window","$timeout",function(e,i){return{restrict:"A",scope:!1,link:function(n,a,t){var l=function(){var e=n._bubblesInView-(n._bubblesInView-n._activeImageIndex);i(function(){if(e>n._bubblesInView-2){var i=n._activeImageIndex+1-n._bubblesInView+1;n._activeImageIndex!=n.images.length-1?n._bubblesContainerMarginLeft="-"+n._finalBubbleSpace*i+"px":n._bubblesContainerMarginLeft="-"+n._finalBubbleSpace*(i-1)+"px"}else n._bubblesContainerMarginLeft="0px"})};angular.element(e).bind("resize",function(){i(l)}),n.$watch("_bubblesInView",function(){i(l)}),n.$watch("_activeImageIndex",function(){i(l)}),n.$watchCollection("images",function(){i(l)})}}}]).directive("ngImageGallery",["$rootScope","$timeout","$q","ngImageGalleryOpts","$animate",function(i,n,a,t,l){return{replace:!0,transclude:!1,restrict:"AE",scope:{images:"=",methods:"=?",conf:"=?",thumbnails:"=?",thumbSize:"=?",inline:"=?",bubbles:"=?",bubbleSize:"=?",imgBubbles:"=?",bgClose:"=?",piracy:"=?",imgAnim:"@?",errorPlaceHolder:"@?",onOpen:"&?",onClose:"&?",onDelete:"&?"},template:'<div class="ng-image-gallery img-move-dir-{{_imgMoveDirection}}" ng-class="{inline:inline}" ng-hide="images.length == 0"><div ng-if="thumbnails && !inline" class="ng-image-gallery-thumbnails"><div class="thumb" ng-repeat="image in images track by image.id" ng-click="methods.open($index);" show-image-async="{{image.thumbUrl || image.url}}" async-kind="thumb" ng-style="{\'width\' : thumbSize+\'px\', \'height\' : thumbSize+\'px\'}"><div class="loader"></div></div></div><div class="ng-image-gallery-modal" ng-if="opened" ng-cloak><div class="ng-image-gallery-backdrop" ng-if="!inline"></div><div class="ng-image-gallery-content" ng-show="!imgLoading" ng-click="backgroundClose($event);"><div class="actions-icons-container"><div class="delete-img" ng-repeat="image in images track by image.id" ng-if="_activeImg == image && image.deletable" title="Delete this image..." ng-click="_deleteImg(image)"></div></div><div class="control-icons-container"><a class="ext-url" ng-repeat="image in images track by image.id" ng-if="_activeImg == image && image.extUrl" href="{{image.extUrl}}" target="_blank" title="Open image in new tab..."></a><div class="close" ng-click="methods.close();" ng-if="!inline"></div></div><div class="prev" ng-click="methods.prev();" ng-class="{\'bubbles-on\':bubbles}" ng-hide="images.length == 1"></div><div class="next" ng-click="methods.next();" ng-class="{\'bubbles-on\':bubbles}" ng-hide="images.length == 1"></div><div class="galleria"><div class="galleria-images img-anim-{{imgAnim}} img-move-dir-{{_imgMoveDirection}}"><div ng-repeat="image in images track by image.id"><img class="galleria-image" ng-right-click ng-if="_activeImg == image && !image.video" ng-src="{{image.url}}" ondragstart="return false;" ng-attr-alt="{{image.alt || undefined}}"/><video class="galleria-image" preload="none" poster="{{image.url}}" controls ng-if="_activeImg == image && image.video"><source src="{{image.videoUrls.mp4}}" type="video/mp4" /><source src="{{image.videoUrls.webm}}" type="video/webm" /></video><div class="playpause" ng-if="_activeImg == image && image.video" ng-click="_playPause()"><div><div></div></div></div></div></div><div class="galleria-title-description-wrapper"><div ng-repeat="image in images track by image.id" ng-if="(image.title || image.desc) && (_activeImg == image)"><div class="title" ng-if="image.title" ng-bind-html="image.title | ngImageGalleryTrust"></div><div class="desc" ng-if="image.desc" ng-bind-html="image.desc | ngImageGalleryTrust"></div></div></div><div class="galleria-bubbles-wrapper" ng-if="bubbles && !imgBubbles" ng-hide="images.length == 1" ng-style="{\'height\' : bubbleSize+\'px\'}" bubble-auto-fit><div class="galleria-bubbles" bubble-auto-scroll ng-style="{\'margin-left\': _bubblesContainerMarginLeft}"><span class="galleria-bubble" ng-click="_setActiveImg(image);" ng-repeat="image in images track by image.id" ng-class="{active : (_activeImg == image)}" ng-style="{\'width\' : bubbleSize+\'px\', \'height\' : bubbleSize+\'px\', margin: _bubbleMargin}"></span></div></div><div class="galleria-bubbles-wrapper" ng-if="bubbles && imgBubbles" ng-hide="images.length == 1" ng-style="{\'height\' : bubbleSize+\'px\'}" bubble-auto-fit><div class="galleria-bubbles" bubble-auto-scroll ng-style="{\'margin-left\': _bubblesContainerMarginLeft}"><span class="galleria-bubble img-bubble" ng-click="_setActiveImg(image);" ng-repeat="image in images track by image.id" ng-class="{active : (_activeImg == image)}" show-image-async="{{image.bubbleUrl || image.thumbUrl || image.url}}" async-kind="bubble" ng-style="{\'width\' : bubbleSize+\'px\', \'height\' : bubbleSize+\'px\', \'border-width\' : bubbleSize/10+\'px\', margin: _bubbleMargin}"></span></div></div></div></div><div class="ng-image-gallery-loader" ng-show="imgLoading"><div class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div></div><div class="ng-image-gallery-errorplaceholder" ng-show="imgError"><div class="ng-image-gallery-error-placeholder" ng-bind-html="errorPlaceHolder | ngImageGalleryTrust"></div></div></div></div>',link:{pre:function(g,o,s){g._showLoader=function(){g.imgLoading=!0},g._hideLoader=function(){g.imgLoading=!1},g._loadImg=function(e){if(!e)return a.reject();var i=a.defer();e.hasOwnProperty("cached")||g._showLoader();var n=new Image;return n.src=e.url,n.onload=function(){e.hasOwnProperty("cached")||g._hideLoader(),e.hasOwnProperty("cached")||(e.cached=!0),i.resolve(e)},n.onerror=function(){e.hasOwnProperty("cached")||g._hideLoader(),i.reject("Error when loading img")},i.promise},g._setActiveImg=function(e){g.images.indexOf(g._activeImg)-g.images.indexOf(e)==g.images.length-1||g.images.indexOf(g._activeImg)-g.images.indexOf(e)<=0&&g.images.indexOf(g._activeImg)-g.images.indexOf(e)!=-(g.images.length-1)?g._imgMoveDirection="forward":g._imgMoveDirection="backward",g._loadImg(e).then(function(e){g._activeImg=e,g._activeImageIndex=g.images.indexOf(e),g.imgError=!1},function(){g._activeImg=null,g._activeImageIndex=g.images.indexOf(e),g.imgError=!0})},g._safeApply=function(e){var i=this.$root.$$phase;"$apply"==i||"$digest"==i?e&&"function"==typeof e&&e():this.$apply(e)},g._deleteImg=function(e){var i=function(){var i=g.images.indexOf(e);g.images.splice(i,1),g._activeImageIndex=0};g.onDelete({img:e,cb:i})},g._playPause=function(){var e=o.find("video");e[0].paused?(e[0].play(),l.removeClass(e.next(),"on"),l.addClass(e.next(),"off")):(e[0].pause(),l.removeClass(e.next(),"off"),l.addClass(e.next(),"on"))},g.images=void 0!=g.images?g.images:[],g.methods=void 0!=g.methods?g.methods:{},g.conf=void 0!=g.conf?g.conf:{},g.$watchCollection("conf",function(e){g.thumbnails=void 0!=e.thumbnails?e.thumbnails:void 0!=g.thumbnails?g.thumbnails:t.thumbnails,g.thumbSize=void 0!=e.thumbSize?e.thumbSize:void 0!=g.thumbSize?g.thumbSize:t.thumbSize,g.inline=void 0!=e.inline?e.inline:void 0!=g.inline?g.inline:t.inline,g.bubbles=void 0!=e.bubbles?e.bubbles:void 0!=g.bubbles?g.bubbles:t.bubbles,g.bubbleSize=void 0!=e.bubbleSize?e.bubbleSize:void 0!=g.bubbleSize?g.bubbleSize:t.bubbleSize,g.imgBubbles=void 0!=e.imgBubbles?e.imgBubbles:void 0!=g.imgBubbles?g.imgBubbles:t.imgBubbles,g.bgClose=void 0!=e.bgClose?e.bgClose:void 0!=g.bgClose?g.bgClose:t.bgClose,g.piracy=void 0!=e.piracy?e.piracy:void 0!=g.piracy?g.piracy:t.piracy,g.imgAnim=void 0!=e.imgAnim?e.imgAnim:void 0!=g.imgAnim?g.imgAnim:t.imgAnim,g.errorPlaceHolder=void 0!=e.errorPlaceHolder?e.errorPlaceHolder:void 0!=g.errorPlaceHolder?g.errorPlaceHolder:t.errorPlaceHolder}),g.onOpen=void 0!=g.onOpen?g.onOpen:angular.noop,g.onClose=void 0!=g.onClose?g.onClose:angular.noop,g.onDelete=void 0!=g.onDelete?g.onDelete:angular.noop;var r=!0;g.$watchCollection("images",function(){r?r=!1:g.images.length&&g._setActiveImg(g.images[g._activeImageIndex||0])});var c=!0;if(g.$watch("_activeImageIndex",function(e){c?c=!1:g.images.length&&g._setActiveImg(g.images[e])}),g.$watch("inline",function(){n(function(){g.inline&&g.methods.open()})}),g.methods.open=function(e){g._activeImageIndex=e?e:0,g.opened=!0,g.inline||angular.element(document.body).addClass("body-overflow-hidden"),n(function(){g.onOpen()},300)},g.methods.close=function(){g.opened=!1,angular.element(document.body).removeClass("body-overflow-hidden"),n(function(){g.onClose(),g._activeImageIndex=0},300)},g.methods.next=function(){g._activeImageIndex==g.images.length-1?g._activeImageIndex=0:g._activeImageIndex=g._activeImageIndex+1},g.methods.prev=function(){0==g._activeImageIndex?g._activeImageIndex=g.images.length-1:g._activeImageIndex--},g.backgroundClose=function(e){if(g.bgClose&&!g.inline)for(var i=["galleria-image","destroy-icons-container","ext-url","close","next","prev","galleria-bubble"],n=0;n<e.target.classList.length&&i.indexOf(e.target.classList[n])==-1;n++)g.methods.close()},angular.element(document).bind("keyup",function(i){g.inline||(i.which==e.right||i.which==e.enter?n(function(){g.methods.next()}):i.which==e.left?n(function(){g.methods.prev()}):i.which==e.esc&&n(function(){g.methods.close()}))}),window.Hammer){var m=new Hammer(o[0]);m.on("swiperight",function(e){n(function(){g.methods.prev()})}),m.on("swipeleft",function(e){n(function(){g.methods.next()})}),m.on("doubletap",function(e){g.inline||n(function(){g.methods.close()})})}var d=function(){angular.element(document.body).removeClass("body-overflow-hidden")};i.$on("$stateChangeSuccess",d),i.$on("$routeChangeSuccess",d)}}}}])}();
//# sourceMappingURL=ng-image-gallery.min.js.map
